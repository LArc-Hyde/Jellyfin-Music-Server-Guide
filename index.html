<!DOCTYPE html>
<html>
<head>
    <title>Guide: Jellyfin Music Server</title>
    <style>
        /* CSS to position the button */
        .code-container {
            position: relative;
            background: #222;
            color: #eee;
            padding: 1em;
            margin: 1em 0;
            border-radius: 5px;
        }
        .copy-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            padding: 5px 10px;
            background: #444;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 3px;
        }
    </style>
</head>
<body>

    <h1>Guide:  Jellyfin Music Server</h1>
    <p>In this guide, we will go over how to set up a Jellyfin Music Server using a Raspberry Pi:</p>

    <h2>Prerequisites</h2>
    <p>-Raspberry Pi (we used a Pi 5 4GB RAM) <br>
    -Raspberry Pi Power Adapter<br>
    -SD Card (at least 32GB)<br>
    -External Harddrive<br>
    -Ethernet Cable (CAT5e or CAT6 should be fine)<br>
    -Seperate Computer <br>
    -Raspberry Pi Case (Optional)</p>

    <hr>

    <h2>Step 1:   Installing the OS on the Raspberry Pi</h2>
    <p>For this guide we used Ubuntu Server 24.04.3 LTS.  Other operating systems might use slightly different commands so please research if you have something else installed. <br>You will need to download the Raspberry Pi Imager from the Raspberry Pi website. </p>

    <h3>A:   Download the Raspberry Pi Imager</h3>
    <p><a href="https://www.raspberrypi.com/software/">Raspberry Pi Imager Download</a></p>

    <h3>B:  Flash The Raspberry Pi OS</h3>
    <p>Once you install the Raspberry Pi Imager, connect your SD Card to your computer and launch the imager.  In the imager, select your Raspberry Pi device. We used a Raspberry Pi 5 and selected that.  Then, for Operating System we selected Other General-Purpose OS.  From there we selected Ubuntu.  Then, from the Ubuntu selections, we chose Ubuntu Server 24.04.3 LTS (64-bit).  We suggest using and LTS version of Ubuntu because they get support for longer period of time compared to the regular releases and tend to be more stable.  This project can also work with Ubuntu Desktop, but it is not reccomended since Ubuntu Desktop includes a gui that can slow down the Raspberry Pi. Once the OS has been selected.  Click Choose Storage and select the SD Card.  You should get a pop up saying if you would like to apply OS customization settings.  Click Edit Settings and set a host name, set a username, and set a password.  If you are going to use wifi (wired connection preferred) also configure wireless LAN. Click on Services and enable SSH.  For this project, we used password authentication.  Then click save.  Then click Yes to apply the configuration settings.  Once all that is done, remove your SD card and plug it, into your Raspberry Pi.  Once you power on the Raspberry Pi, it should automatically connect to the internet.</p>

    <h3>C:   Get the External SSD Ready</h3>
    <p>It is suggested to not use an SD Card for storage for a media server, so therefore, we need to get the ssd ready.  You can always format the ssd while connected to the Pi, however we settled with a GUI to format the External SSD. We used the KDE Partition Manager to change the SSD from exfat to ext4 which is what is reccomended for this.  Then, format the SSD to ext4.</p>


    <hr>

    <h2>Step 2:   Connecting to the Pi</h2>
    <p>Connecting to the Pi can different depending on the method or the computer of the user.  We used a computer with  Linux, so we used SSH through a terminal.  A Windows user might need to download extra software like PuTTY.  The rest of the steps will be using for Linux through the terminal.<br><a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html">PuTTY Download</a></p>

    <h3>A:   Checking SSH</h3>
    <p>In general, SSH is typically preinstalled on most Linux Distributions.  This is how to check if SSH is installed on Ubuntu.  Install methods can vary distro to distro.  This shoud work with most Ubuntu-based distros. </p>
    <div class="code-container">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code id="bash-script-1">
ssh -V
        </code></pre>
    </div>

    <h3>B:   Installing SSH</h3>
    <p>If the previous command shows that SSH is not installed, then use the following command to update the package list and install SSH.  If ssh is installed, you can skip this step.</p>

        <div class="code-container">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code id="bash-script-1">
sudo apt update
sudo apt install openssh-client
        </code></pre>
    </div>

    <h3>C:   Connecting to the Pi</h3>
    <p>We will use SSH to connect to the Raspberry Pi.  You will need your username, hostname, and password used when flashing the Raspberry Pi image.  When you type the following command do not include the square brackets and replace username with the username you created and hostname with the on you created.  </p>
        <div class="code-container">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code id="bash-script-1">
ssh [username]@[hostname]
        </code></pre>
    </div>

    <h3>D:   SSH Authentication</h3>
    <p>This can vary slightly from distro to distro.  Typically, the first time you connect to a new device through SSH, you'll be asked if you are sure you want to connect.  Type or select yes.  It shoudl prompt you for the user's password.  Once you input that in, it might ask you if you want to save the login information.  That choice is up to you.</p>

    <h2>Step 3:   Getting The Pi Ready</h2>
    <p>This step will mainly be getting the Pi ready to have a music server.  We will go over permissions, where to store music files, and how to automount the ssd.</p>

    <h3>A:   Creating the mount point</h3>
    <p>The mount point is the location in the server where the harddrive is going to connect.  We are going to use this location to add music files.  We chose  /media/ because based on our expiriences, sometimes Jllyfin has trouble reading the user's home folders.  Feel free to name the directory for the music files anything.  In this guide we named it JellyfinMusic.</p>
           <div class="code-container">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code id="bash-script-1">
sudo mkdir -p /media/JellyfinMusic
        </code></pre>
    </div>

    <h3>B:   Creating the media group and adding users</h3>
    <p>Since /media/JellyfinMusic is located within the system files, we need to give our user special permmisions to freely access this directory.  We will also need to grant Jellyfin this access.  We will create a group to give access to both the user and Jellyfin.  However, Jellyfin will be granted membership to that group once it is installed.  The name of group will be "media".  Input the following commands without the square brackets and replace username with your username.</p>
           <div class="code-container">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code id="bash-script-1">
sudo groupadd media
sudo usermod -aG [username]
sudo chown -R [username]:media /media/JellyfinMusic
sudo chmod -R 775 /media/JellyfinMusic
        </code></pre>
    </div>

    <h3>C:   Applying Group Changes</h3>
    <p>To apply the group changes just log out and log back in.</p>
           <div class="code-container">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code id="bash-script-1">
exit ssh
ssh [username]@[hostname]
        </code></pre>
    </div>

        <h3>D:   Automounting the External Drive</h3>
    <p>If you haven't already connect the external harddrive to a USB 3.0 port.  Then type the following and copy the UUID for your external harddrive.  It should be listed as something similiar to /dev/sda1. </p>
           <div class="code-container">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code id="bash-script-1">
sudo blkid
        </code></pre>
    </div>
        <p>Now we have to edit fstab to add the the drive to the correct mounting point.  Add the following line to the end of the file without square brackets and with your UUID for your external drive and the name of your music folder.  To save and exit type Ctrl+O, then Enter, and then Ctrl+X.</p>
            <div class="code-container">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code id="bash-script-1">
UUID=[YOUR_UUID] /media/[YOUR_MUSIC_FOLDER_NAME] ext4 defaults,nofail 0 0
        </code></pre>
    </div>
        <p>Now apply changes by typing the following:</p>
            <div class="code-container">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code id="bash-script-1">
sudo mount -a
        </code></pre>
    </div>

    <h2>Step 4: Setting Up Jellyfin</h4>
    <h3>A: Installing Jellyfin</h3>
    <p>We need to install curl so we can use the official Ubuntu installation script.</p>
     <div class="code-container">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code id="bash-script-1">
sudo apt install curl
curl https://repo.jellyfin.org/install-debuntu.sh | sudo bash
        </code></pre>
    </div>

    <h3>B: Configuring Jellyfin Permmisions</h3>
    <p>We need to give Jellyfin the correct permmisions to have acces to our music folder in /media/ adn we can do that by adding Jellyfin to our media group.</p>
     <div class="code-container">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code id="bash-script-1">
sudo usermod -aG media jellyfin
sudo systemctl restart jellyfin
        </code></pre>
    </div>

        <h3>C: Jellyfin Setup</h3>
    <p>Copy the following command to find your ip address.</p>
     <div class="code-container">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code id="bash-script-1">
ip a
        </code></pre>
    </div>
      <p>Once you find your ip address copy it into your actual computer (not the Pi) in the following format to a web browser.  The Jellyfin setup wizard should appear.  Follow the instructions and do not forget to add your music folder in /media/[YOUR_MUSIC_FOLDER_NAME] into the Jellyfin wizard.</p>
     <div class="code-container">
        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
        <pre><code id="bash-script-1">
http://[RasperryPi_IP_Address]:8096
        </code></pre>
    </div>

    <h2>Step 5:  Setting Up Remote Access</h2>




    <script src="copy.js"></script> </body>
</html>
